<!DOCTYPE HTML>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th=“http://www.thymeleaf.org”
      layout:decorate="~{fragments/main_layout}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Cosca Store</title>
</head>
<body>
<div layout:fragment="content" class="container" >

    <div class="container">

        <h1 class="jumbotron">
            <span sec:authentication="name"></span>'s Shopping Cart
        </h1>

        <div class="alert alert-info" th:if="${outOfStockMessage}" th:utext="${outOfStockMessage}"></div>

        <div class="panel-default well" th:each="prodotto : ${prodotti}">
            <div class="panel-heading">
                <h1><a th:text="${prodotto.name}" th:href="@{'/product/' + ${product.getKey().id}}">Title</a></h1>
                <h3 th:text="${prodotto.descrizione}">Description</h3>
            </div>
            <div class="row panel-body">
                <div th:inline="text" class="col-md-2">Price: [[${product.getKey().price}]] $</div>
                <div th:inline="text" class="col-md-9">Quantity: [[${product.getValue()}]]</div>
                <a th:href="@{'/shoppingCart/removeProduct/{codice}'(id=${product.getKey().id})}" class="col-md-1">
                    <button type="button" class="btn btn-primary" th:text="Remove">Remove</button>
                </a>
            </div>
            <br></br>
        </div>

        <div class="row panel-body">
            <h2 class="col-md-11" th:inline="text">Total: [[${total}]]</h2>
            <a th:href="@{'/shoppingCart/checkout'}" class="col-md-1">
                <button type="button" class="btn btn-danger" th:text="Checkout">Checkout</button>
            </a>
        </div>

    </div>

</div>

</body>
</html>